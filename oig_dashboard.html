
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OIG Fraud & Waste Detection Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-900 to-gray-900 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-7xl mx-auto bg-slate-950 rounded-2xl shadow-xl p-8 transition-all duration-300">
        <!-- Dashboard Header -->
        <div class="mb-8 text-center text-white">
            <h1 class="text-4xl sm:text-5xl font-bold tracking-tight">OIG Fraud & Waste Detection</h1>
            <p class="mt-2 text-lg text-gray-300">A demonstration of data-driven solutions for investigators and auditors.</p>
        </div>

        <!-- Dashboard Controls and Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Summary Cards -->
            <div class="bg-blue-500 text-white p-6 rounded-2xl shadow-lg flex flex-col justify-between transform transition-all hover:scale-[1.02] duration-300">
                <p class="text-sm font-medium opacity-80">Contracts Displayed</p>
                <p id="totalContracts" class="text-3xl font-bold mt-2">--</p>
            </div>
            <div class="bg-red-500 text-white p-6 rounded-2xl shadow-lg flex flex-col justify-between transform transition-all hover:scale-[1.02] duration-300">
                <p class="text-sm font-medium opacity-80">Total High-Risk Flags</p>
                <p id="highRiskFlags" class="text-3xl font-bold mt-2">--</p>
            </div>
            <div class="bg-green-500 text-white p-6 rounded-2xl shadow-lg flex flex-col justify-between transform transition-all hover:scale-[1.02] duration-300">
                <p class="text-sm font-medium opacity-80">Total Contracts Under Audit<sup>1</sup></p>
                <p id="contractsUnderAudit" class="text-3xl font-bold mt-2">--</p>
            </div>
        </div>

        <!-- Controls and Chart Container -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Filter Controls -->
            <div class="lg:col-span-1 bg-slate-800 p-6 rounded-2xl shadow-lg flex flex-col justify-start">
                <label for="risk-select" class="block text-sm font-bold text-white mb-1">Filter by Risk Score</label>
                <select id="risk-select" class="w-full p-3 bg-slate-700 text-white border border-gray-700 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none cursor-pointer transition-all duration-300">
                    <option value="all">All</option>
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                </select>
            </div>
            <!-- Chart Container -->
            <div class="lg:col-span-2 bg-slate-800 p-6 rounded-2xl shadow-lg">
                <canvas id="riskChart"></canvas>
                <div class="mt-4">
                    <p class="text-sm text-gray-300 text-center">This chart shows the total number of contracts by risk score for the entire dataset. It provides a quick overview of the overall risk distribution.</p>
                    <p class="mt-2 text-xs text-gray-400 text-center"><sup>1</sup>This is a placeholder to demonstrate the prioritization of audits. The calculation is based on the formula: Total Contracts Under Audit = 0.75 * (Total High-Risk Flags), which rounds down 75% of the total high-risk flags to the nearest whole number.</p>
                </div>
            </div>
        </div>

        <!-- Data Table -->
        <div class="bg-slate-800 p-6 rounded-2xl shadow-lg">
            <h2 class="text-2xl font-bold text-white mb-4">Contracts</h2>
            <p class="text-sm text-gray-300 mb-4">
                Below are the details for each contract. Each column provides key information to help auditors quickly identify and evaluate potential issues.
            </p>
            <div class="overflow-x-auto rounded-lg shadow-sm">
                <table class="min-w-full divide-y divide-gray-700">
                    <thead class="bg-slate-700">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Contract ID</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Vendor</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Value</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Risk Score</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Date</th>
                        </tr>
                    </thead>
                    <tbody id="contractsTableBody" class="bg-gray-800 divide-y divide-gray-700 text-gray-300">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Load Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const riskSelect = document.getElementById('risk-select');
            const totalContractsElem = document.getElementById('totalContracts');
            const highRiskFlagsElem = document.getElementById('highRiskFlags');
            const contractsUnderAuditElem = document.getElementById('contractsUnderAudit');
            const contractsTableBody = document.getElementById('contractsTableBody');
            const ctx = document.getElementById('riskChart').getContext('2d');

            // Mockup data for OIG-related analysis
            const contractData = [
                { id: 'C78901', vendor: 'Global Solutions Inc.', value: 1200000, risk: 'low', date: '2023-01-15' },
                { id: 'C78902', vendor: 'Tech Innovators Co.', value: 50000, risk: 'medium', date: '2023-01-18' },
                { id: 'C78903', vendor: 'SecureCorp Solutions', value: 8500000, risk: 'high', date: '2023-01-20' },
                { id: 'C78904', vendor: 'Data Dynamics LLC', value: 25000, risk: 'low', date: '2023-01-22' },
                { id: 'C78905', vendor: 'Apex Consulting Group', value: 1800000, risk: 'medium', date: '2023-01-25' },
                { id: 'C78906', vendor: 'Integrity Tech Ltd.', value: 3000000, risk: 'high', date: '2023-01-28' },
                { id: 'C78907', vendor: 'Future Systems Co.', value: 90000, risk: 'low', date: '2023-02-01' },
                { id: 'C78908', vendor: 'Pinnacle Ventures', value: 450000, risk: 'medium', date: '2023-02-05' },
                { id: 'C78909', vendor: 'Stratagem Group', value: 7500000, risk: 'high', date: '2023-02-10' },
                { id: 'C78910', vendor: 'Quantum Services', value: 20000, risk: 'low', date: '2023-02-12' },
                { id: 'C78911', vendor: 'Innovate Solutions Inc.', value: 150000, risk: 'low', date: '2023-02-15' },
                { id: 'C78912', vendor: 'United Global Inc.', value: 900000, risk: 'medium', date: '2023-02-18' },
                { id: 'C78913', vendor: 'Sentinel Security Co.', value: 5000000, risk: 'high', date: '2023-02-20' },
                { id: 'C78914', vendor: 'Synergy Corp', value: 70000, risk: 'low', date: '2023-02-22' },
                { id: 'C78915', vendor: 'Veridian Dynamics', value: 2200000, risk: 'medium', date: '2023-02-25' },
                { id: 'C78916', vendor: 'OmniCorp', value: 6500000, risk: 'high', date: '2023-02-28' },
                { id: 'C78917', vendor: 'Prime Logistics', value: 120000, risk: 'low', date: '2023-03-01' },
                { id: 'C78918', vendor: 'Dynamic Systems', value: 450000, risk: 'medium', date: '2023-03-05' },
                { id: 'C78919', vendor: 'Falcon Solutions', value: 9500000, risk: 'high', date: '2023-03-10' },
                { id: 'C78920', vendor: 'Evergreen Services', value: 30000, risk: 'low', date: '2023-03-12' },
            ];
            
            // Calculate static totals that should not change when filtering
            const highRiskTotal = contractData.filter(d => d.risk === 'high').length;
            const contractsUnderAuditTotal = Math.floor(highRiskTotal * 0.75);

            // Set the static totals on initial load
            highRiskFlagsElem.textContent = highRiskTotal.toLocaleString();
            contractsUnderAuditElem.textContent = contractsUnderAuditTotal.toLocaleString();

            const renderTable = (filteredData) => {
                contractsTableBody.innerHTML = '';
                filteredData.forEach(contract => {
                    const row = document.createElement('tr');
                    let riskColor = '';
                    switch (contract.risk) {
                        case 'low':
                            riskColor = 'text-green-400';
                            break;
                        case 'medium':
                            riskColor = 'text-yellow-400';
                            break;
                        case 'high':
                            riskColor = 'text-red-400';
                            break;
                    }
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-300">${contract.id}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${contract.vendor}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">$${contract.value.toLocaleString()}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold ${riskColor}">${contract.risk.charAt(0).toUpperCase() + contract.risk.slice(1)}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${contract.date}</td>
                    `;
                    contractsTableBody.appendChild(row);
                });
            };

            let myChart;

            const updateDashboard = () => {
                const selectedRisk = riskSelect.value;
                let filteredData = contractData;

                if (selectedRisk !== 'all') {
                    filteredData = contractData.filter(d => d.risk === selectedRisk);
                }

                // Update the *only* summary card that should be dynamic
                totalContractsElem.textContent = filteredData.length.toLocaleString();

                // Update chart
                if (myChart) {
                    myChart.destroy();
                }

                const riskCounts = {
                    low: contractData.filter(d => d.risk === 'low').length,
                    medium: contractData.filter(d => d.risk === 'medium').length,
                    high: contractData.filter(d => d.risk === 'high').length,
                };

                myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Low Risk', 'Medium Risk', 'High Risk'],
                        datasets: [{
                            label: 'Contracts by Risk Score',
                            data: [riskCounts.low, riskCounts.medium, riskCounts.high],
                            backgroundColor: ['#22c55e', '#facc15', '#ef4444'],
                            borderColor: ['#16a34a', '#eab308', '#dc2626'],
                            borderWidth: 1,
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1,
                                    color: '#ccc',
                                    font: {
                                        weight: 'bold'
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#ccc',
                                    font: {
                                        weight: 'bold'
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            }
                        }
                    }
                });

                // Render the table with filtered data
                renderTable(filteredData);
            };

            // Event listener for interactivity
            riskSelect.addEventListener('change', updateDashboard);

            // Initial dashboard render
            updateDashboard();
        });
    </script>
</body>
</html>
